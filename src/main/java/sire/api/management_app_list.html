<!--
  ~ Copyright 2023 Tiago Carvalho
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css">
<style>
    h3 {
        display:inline;
    }
    button {
        width: 100%;
    }
</style>
<head>
    <title>
        SIRE's Management Platform</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Web page for app administrators to manage and configure extensions and policies, as well as view the membership state.">
</head>
<body>
<header>
    <h1>SIRE's Management Platform</h1>
</header>
<div id="title"></div>
<div id="apps"></div>
</body>
<script>
    const urlParams = new URLSearchParams(window.location.search);
    const admin = urlParams.get('admin');
    window.onload = function(){
        document.getElementById('title').innerHTML = "<h2>" + admin + "\'s App List</h2>";
    };

    console.log(admin);
    const apps = ["app1", "app2"];
    appendApps(apps);

    /*var apiUrl = 'http://localhost:8080/apps?admin=' + admin;
    fetch(apiUrl).then(response => {
        return response.json();
    }).then(data => {
        appendApps(data)
    }).catch(err => {
        // Do something for an error here
    });*/

    function appendApps(data) {
        const mainContainer = document.getElementById("apps");
        mainContainer.innerHTML = "<div>";
        for(let i = 0; i < data.length; i++) {
            const div = document.createElement("app");
            div.innerHTML = "<a href='management_api.html?app=" + data[i] + "'><button><h3>" + data[i] + "</h3></button></a>";
            mainContainer.appendChild(div);
        }
        mainContainer.innerHTML = mainContainer.innerHTML + "</div>";

    }
</script>
</html>